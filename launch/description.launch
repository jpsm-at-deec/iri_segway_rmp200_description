<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <arg name="ns"  default="robot" />
  <arg name="model" default="segway_example" />
  <arg name="static_wheels" default="false" />

  <group ns="$(arg ns)">
  
    <param name="robot_description"
         command="$(find xacro)/xacro --inorder '$(find iri_segway_rmp200_description)/urdf/$(arg model).xacro' name:=$(arg ns)" />

    <node pkg="robot_state_publisher" type="state_publisher" name="state_publisher">
      <param name="tf_prefix" type="string" value="/$(arg ns)"/>
      <param name="publish_frequency" type="double" value="20.0"/>
    </node>
    
    <!--
    <node pkg="joint_state_publisher"
          type="joint_state_publisher"
          name="joint_state_publisher">
      <param name="use_gui"           value="true"/>
      <remap from="$(arg ns)/joint_states" to="$(arg ns)/joint_states/"/>
      <remap from="$(arg ns)/robot_description" to="$(arg ns)/robot_description/"/>
    </node>
    -->

  </group>

  <group if="$(arg static_wheels)">
    <include file="$(find iri_segway_rmp200_description)/launch/wheel_static_transform.launch">
      <arg name="name" value="$(arg ns)"/>
    </include>
  </group>

  
  <include file="$(find iri_segway_rmp200_description)/launch/caster_wheels_static_transform.launch">
    <arg name="name" value="$(arg ns)"/>
  </include>

</launch>